<!DOCTYPE html>
<html lang="en" class="js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta charset="utf-8" />
    <meta name="keywords" content="">

    <title>POCO Creator – Automatically Create POCO Object Based on Entities (T4 Templates)</title>
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon" />
    <link rel="stylesheet" href="assets/css/toc.css" />
    <link rel="stylesheet" href="assets/css/highlight.css" />
    <link rel="stylesheet" href="assets/css/prism.css" />
    <link rel="stylesheet" href="assets/css/prism-csdiff.css" />


    <link rel="stylesheet" href="assets/css/theme_firefly.css" />
    <link rel="stylesheet" href="assets/css/mermaid.css" />
</head>
<body class="markdown-body" role="document">

    <div class="wrapper">

        <div class="middle">

            <div class="container">

                <div class="content" role="navigation" aria-label="footer navigation">
                    <a id="previousButton" class="btn btn-neutral float-left" style="visibility:hidden">Previous</a> <a id="nextButton" class="btn btn-neutral float-right" style="visibility:hidden">Next</a>
                </div>
                <div class="content"><h1 id="poco-creator-automatically-create-poco-object-based-on-entities-t4-templates">POCO Creator – Automatically Create POCO Object Based on Entities (T4 Templates)</h1>
<p>This article is a part of a series of articles about reusing code from a migrated application in a web project.</p>
<p>To configure and setup a MVC application that reuses migrated code, see Setting Up an MVC Project that Reuses Migrated Code.</p>
<p>Next I recommend you read these articles in the following order:</p>
<ol>
<li>Creating My First MVC Page</li>
<li>Using POCO Objects Based on Migrated Entities</li>
<li>POCO Creator– Automatically Create POCO Object Based on Entities, (T4 Templates) – this article</li>
<li>POCO Creator, next step–extending the generated objects</li>
<li>Reusing Migrated Reports on the Web</li>
</ol>
<p>In my previous article, I described how to create a basic POCO Object, which has simple members with simple types.</p>
<p>But sometimes I would like to have a POCO Object that will be similar to my entities.
In the previous example I created a partial object that only included some of my Customer Entity columns, but what if I want it all? That’s a lot of work!</p>
<p><img src="Entity_column_vs.png" alt="" /></p>
<p>I would have to create 11 properties, like these:<br />
<img src="CustomerPoco_class.png" alt="" /></p>
<p>I would have to create a “CustomerPocoProvider” that will have update, delete, insert and select methods.<br />
And also there I will have to create 11 assignment statements that update the POCO Object based on my Entity:<br />
<img src="CustomerPoco_add.png" alt="" /></p>
<p>And 11 update statements that update my Entity based on that POCO:<br />
<img src="CustomerPoco_add1.png" alt="" /></p>
<p>This seems like a lot of work, specifically if I have 800 tables, with 20,000 fields. That’ll be like a 100,000 lines of code without any sophistication in them, just to bridge to the Entities.</p>
<p>That got me thinking about code generation, “if a machine can write it, why would not it?”</p>
<p>My first Idea was to create these kind of objects in the migration, BUT what if in the future I would like to add a new column or a new entity, then I’ll still have to do it my self.</p>
<p>So after some investigation, I found that there is a Visual Studio Feature – called T4 Templates, which is a framework that allows you to automatically generate code in Visual Studio. I’ll explain a little about it now, but if you want to learn more I suggest you start looking here.</p>
<p>First I’ll do a simple demo, to explain it’s strength, later I’ll show how to use it in the Entities context.</p>
<p>So in my Northwind.Poco project I’ll add an item and choose TextTemplate:<br />
<img src="create_text_template.png" alt="" /></p>
<p>I’ll get the following code (I’m using a resharper extension to get syntax highlighting, you’ll probably see it in black and white):<br />
<img src="code_text_template.png" alt="" /></p>
<p>In the “extension” setting I’ll change it from “.txt”, to “.cs”, so it’ll create a C# file.<br />
<img src="text_template_extension.png" alt="" /></p>
<p>Now (after I save) in the solution explorer I’ll open the little + next to the “TextTemplate1.tt” file, and I’ll see a “cs” file that is empty, but will later hold all of my generated code:<br />
<img src="text_template_extension_vs.png" alt="" /></p>
<p>Next I’ll write some C# code in my template, which will be put in my C# file:<br />
<img src="code_text_template1.png" alt="" /></p>
<p>When I save the file, the “TextTemplate1.cs” file will look like this:<br />
<img src="text_template_file.png" alt="" /></p>
<p>So far, so good.</p>
<p>Now let’s make it interesting, let’s add the following code:
<img src="code_text_template2.png" alt="" /></p>
<p>Now when I save the file, it’ll look as following:<br />
<img src="text_template_file2.png" alt="" /></p>
<p>Now that we can do this, we can do anything. With a little use of reflection, and some spare time we can do better.</p>
<ul>
<li><a href="poco-creator-v0_1.html">POCO Creator V0_1</a></li>
<li><a href="using-the-pocoprovider-in-an-mvc-controller.html">Using the PocoProvider in an MVC controller</a></li>
<li><a href="here-are-the-attached-files-i-promised.html">Here are the attached files I promised</a></li>
</ul>
<br /><hr />Help us improve, <a href="https://github.com/FireflyMigration/firefly-doc/blob/master//02-Development/03-Articles/Web-Development/Using-MVC-with-Migrated-Code/05-POCO-Creator-Automatically-Create-POCO-Object-Based-on-Entities/index.md" target="_blank">Edit this page on GitHub</a><br /> or email us at <a href="mailto:info@fireflymigration.com?Subject=Firefly%20Documentation%20Website" target="_top">info@fireflymigration.com</a></div><!-- .content -->
                
            </div><!-- .container-->
        
            <aside class="left-sidebar">
                <div class="wy-side-nav-search-ff">
                    <a href="" class="test">  <img src="assets/img/logo-big.png"></a>
                </div><div id="menuTree"</div>
            </aside><!-- .left-sidebar -->

            <aside class="right-sidebar"></aside><!-- .right-sidebar -->

        </div><!-- .middle-->



    </div>


    <script src="assets/js/mermaid.js"></script>
    <script src="assets/js/prism-start.js"></script>
    <script src="assets/js/prism-clike.js"></script>
    <script src="assets/js/prism-markup.js"></script>
    <script src="assets/js/prism-css.js"></script>
    <script src="assets/js/prism-javascript.js"></script>

    <script src="assets/js/prism-diff.js"></script>
    <script src="assets/js/prism-csdiff.js"></script>
    <script src="assets/js/prism-function.js"></script>

    <script src="assets/js/jquery-3.1.1.js"></script>
    
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-4806432-3', 'auto');
  ga('send', 'pageview');

    </script>
    <script src="assets/js/tree.js"></script>
    <script language="javascript">
        buildTree('menuTree', 'poco-creator-automatically-create-poco-object-based-on-entities.html', 'previousButton', 'nextButton');
    </script>
</body>
</html>