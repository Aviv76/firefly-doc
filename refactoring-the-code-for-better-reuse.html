<!DOCTYPE html>
<html lang="en" class="js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta charset="utf-8" />
    <meta name="keywords" content="">

    <title>Refactoring the code for better reuse</title>
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon" />
    <link rel="stylesheet" href="assets/css/toc.css" />
    <link rel="stylesheet" href="assets/css/highlight.css" />
    <link rel="stylesheet" href="assets/css/prism.css" />
    <link rel="stylesheet" href="assets/css/prism-csdiff.css" />


    <link rel="stylesheet" href="assets/css/theme_firefly.css" />
    <link rel="stylesheet" href="assets/css/mermaid.css" />
</head>
<body class="markdown-body" role="document">

    <div class="wrapper">

        <div class="middle">

            <div class="container">

                <div class="content" role="navigation" aria-label="footer navigation">
                    <a id="previousButton" class="btn btn-neutral float-left" style="visibility:hidden">Previous</a> <a id="nextButton" class="btn btn-neutral float-right" style="visibility:hidden">Next</a>
                </div>
                <div class="content"><h1 id="refactoring-the-code-for-better-reuse">Refactoring the code for better reuse</h1>
<p>So far we have written this code in the quick and dirty way, but now it’s time to grow up.</p>
<p>This code has a lot of repetitive code. We create the CustomerPoco object in at least four places. That means four places to maintain it, Four places to make any change etc…
Also, this code is in the controller, and I would like to move it to another class, and another project which I can reuse in my migrated code and in new code.</p>
<p>As we are doing it for the first time, it’ll involve some setup and reuse.</p>
<p>We’ll start by adding a new project of type “Class Library”, I’ll call it “Northwind.Poco”.</p>
<p>In that project I’ll reference:</p>
<ol>
<li>ENV</li>
<li>Firefly.box.dll</li>
<li>NorthwindBase.dll</li>
<li>System.Windows.Forms.dll</li>
</ol>
<p>Now I’ll add a reference from the Web Project to the Northwind.Poco project.<br />
Next I’ll move the CustomerPoco class to the Northwind.Poco project.<br />
In the process I’ll have to adjust the “using” statement and also make the CustomerPoco class public.<br />
<img src="using_statement_poco.png" alt="" /></p>
<p>One more important thing: when using classes from other projects in an MVC application cshtml file, we need to inform MVC of that. To do that we need to update the “web.Config” file that sits <strong>within the “Views” folder</strong>, as opposed to the one that sits in the root folder.<br />
Here it is:<br />
<img src="solution_explorer_northwindWeb.png" alt="" /></p>
<p>We’ll just add the namespace of our project to it, and it’ll be able to use it:<br />
<img src="add_namespace_poco.png" alt="" /></p>
<p>If we don’t do this, we’ll get the following error:</p>
<p>Now let’s run and see that everything is working.</p>
<br /><hr />Help us improve, <a href="https://github.com/FireflyMigration/firefly-doc/blob/master//02-Development/03-Articles/Web-Development/Using-MVC-with-Migrated-Code/03-Using-POCO-Objects-Based-on-Migrated-Entities/06-Refactoring-the-code-for-better-reuse/index.md" target="_blank">Edit this page on GitHub</a><br /> or email us at <a href="mailto:info@fireflymigration.com?Subject=Firefly%20Documentation%20Website" target="_top">info@fireflymigration.com</a></div><!-- .content -->
                
            </div><!-- .container-->
        
            <aside class="left-sidebar">
                <div class="wy-side-nav-search-ff">
                    <a href="" class="test">  <img src="assets/img/logo-big.png"></a>
                </div><div id="menuTree"</div>
            </aside><!-- .left-sidebar -->

            <aside class="right-sidebar"></aside><!-- .right-sidebar -->

        </div><!-- .middle-->



    </div>


    <script src="assets/js/mermaid.js"></script>
    <script src="assets/js/prism-start.js"></script>
    <script src="assets/js/prism-clike.js"></script>
    <script src="assets/js/prism-markup.js"></script>
    <script src="assets/js/prism-css.js"></script>
    <script src="assets/js/prism-javascript.js"></script>

    <script src="assets/js/prism-diff.js"></script>
    <script src="assets/js/prism-csdiff.js"></script>
    <script src="assets/js/prism-function.js"></script>

    <script src="assets/js/jquery-3.1.1.js"></script>
    
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-4806432-3', 'auto');
  ga('send', 'pageview');

    </script>
    <script src="assets/js/tree.js"></script>
    <script language="javascript">
        buildTree('menuTree', 'refactoring-the-code-for-better-reuse.html', 'previousButton', 'nextButton');
    </script>
</body>
</html>